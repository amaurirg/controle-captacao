{% extends 'base.html' %}
{% load widget_tweaks %}
{% block content %}
    <!--novo modal-->
    <div id="showmodal" class="ui button primary">
        Show Modal
    </div>
    <div class="ui fullscreen modal event-modal">
        <div class="header">
            Modal de Teste
        </div>
        <div class="content">
            <div id="trigger1" class="ui primary button">
                Adicionar período
            </div>
        </div>
        <div class="actions">
            <div class="ui deny black button">
                Close
            </div>
        </div>
    </div>

    <div class="ui info event-modal modal" data-object="trigger1">
        <div class="header">
            <h1 class="ui left floated blue_color">Adicionar novo período</h1>
        </div>
        <div class="content">
            <form class="ui form" action="{% url 'modal_cria_periodo' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="ui equal width form form-ref">
                    <div class="fields">
                        <div class="field">
                            {% render_field form.nome %}
                        </div>
                    </div>

                    <div class="actions">
                        <button type="submit" class="ui floated deny button primary">
                            <i class="thumbs up icon"></i>
                            Salvar
                        </button>
                        <div class="ui blue deny button">
                            <i class="thumbs down icon"></i>
                            Cancelar
                        </div>
                    </div>

                </div>
            </form>
        </div>
    </div>
    <div class="actions">
        <div class="ui blue deny button">
            <i class="close icon"></i>
            Fechar
        </div>
    </div>


    {% comment %}<div class="ui info event-modal modal" data-object="trigger2">
    <div class="header">
        ecs_sign.c2
    </div>
    <div class="content">
        test?2
    </div>
    <div class="actions">
        <div class="ui deny black button">Close</div>
    </div>
</div>

<div class="ui info event-modal modal" data-object="trigger3">
    <div class="header">
        ecs_sign.c3
    </div>
    <div class="content">
        test?3
    </div>
    <div class="actions">
        <div class="ui deny black button">Close</div>
    </div>
</div>{% endcomment %}
    <!--fim do novo modal-->
{% endblock content %}

<!--script js-->
{% block extrajs %}
    <script>
        $('.event-modal').modal({
            allowMultiple: true
        });

        $('#showmodal').click(function () {
            $('.fullscreen.modal').modal('show');
        });

        $('.event-modal.info').each(function (idx, elem) {
            $(elem).modal('attach events', '#' + $(elem).attr('data-object'));
        });

        $('form').on('submit', function (e) {
            let url = ''
            let postData = $('form').serialize();
            $.ajax({
                url: url,
                type: 'POST',
                data: postData,
                success: function (response) {
                    console.log(response.data);
                },
                error: function (xhr) {
                    console.log('Erro');
                },
                complete: function () {
                    closeModal();
                    console.log('Complete');
                }
            });
            e.preventDefault();
        });

        function closeModal() {
            {#$('.modal').modal('hide');#}
            $('#id_nome').val('');
        }
    </script>
{% endblock extrajs %}
<!--fim do script js-->

<!--exemplo semantic-ui-->
{% comment %}<script>
    // initialize all modals
    $('.coupled.modal')
        .modal({allowMultiple: true});
    // open second modal on first modal buttons
    $('.second.modal')
        .modal('attach events', '.first.modal .button');
    // show first immediately
    $('.first.modal').modal('show');
</script>{% endcomment %}
<!--fim do exemplo semantic-ui-->
